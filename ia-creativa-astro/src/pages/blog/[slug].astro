---
export const prerender = true;

import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title} description={entry.data.description} image={entry.data.heroImage}>
	<article class="content-container">
		<div class="flex flex-col lg:flex-row gap-10">
			<!-- Contenido Principal -->
			<div class="lg:w-2/3">
				<p class="text-sm text-gray-500 mb-2">
                    <a href="/" class="hover:text-indigo-600">Home</a> / 
                    <a href="/blog" class="hover:text-indigo-600">Blog</a> / 
                    <span class="text-gray-400 truncate">{entry.data.title}</span>
                </p>

				<h1 class="text-4xl lg:text-6xl font-extrabold mb-8 text-gray-900 leading-tight tracking-tight">
                    {entry.data.title}
                </h1>

				<p class="text-xl lg:text-2xl text-gray-600 mb-10 leading-relaxed">
                    {entry.data.description}
                </p>

				<img 
                    src={entry.data.heroImage} 
                    alt={`Imagen principal: ${entry.data.title}`} 
                    class="w-full h-auto object-cover rounded-2xl shadow-sm mb-12"
                >

				<div class="prose prose-lg prose-indigo max-w-none">
					<Content />
				</div>

				<!-- Autor -->
				<div class="mt-12 pt-8 border-t border-gray-200 flex items-center">
					<img src="https://placehold.co/64x64/d1d5db/4b5563?text=PD" alt="Avatar Pablo" class="w-16 h-16 rounded-full mr-4 border-2 border-indigo-100">
					<div>
						<p class="text-sm font-semibold text-gray-500 uppercase tracking-wide">Escrito por</p>
						<p class="text-lg font-bold text-gray-900">Pablo Domínguez Barbero</p>
						<p class="text-sm text-gray-600">Apasionado por la IA y la creación digital.</p>
					</div>
				</div>
			</div>

			<!-- Sidebar -->
			<aside class="lg:w-1/3 space-y-8">
				<div class="bg-gray-50 p-6 rounded-2xl border border-gray-100 text-center sticky top-24">
					<h4 class="text-xl font-bold mb-3 text-indigo-600">Herramienta del Mes</h4>
					<p class="text-gray-700 mb-4">La IA #1 para optimizar tus flujos de trabajo de creación de contenido.</p>
					<a href="#" class="inline-block px-5 py-2 text-sm font-bold text-white bg-indigo-600 rounded-full hover:bg-indigo-700 transition duration-300 shadow-md transform hover:scale-105">
						¡Prueba Jasper AI Gratis!
					</a>
                    <p class="text-xs text-gray-400 mt-2">(Enlace Afiliado)</p>
				</div>
			</aside>
		</div>
	</article>
</Layout>
